!function(){var e={675:function(e,t,s){"use strict";s.r(t),s.d(t,{ContaoCookiebar:function(){return g}});const i={selector:".contao-cookiebar",token:"ccb_contao_token",configId:null,pageId:null,hideOnInit:!1,blocking:!1,focusTrap:!0,version:null,lifetime:63072e3,consentLog:!1,cookies:null,configs:null,doNotTrack:!1,currentPageId:0,excludedPageIds:null,disableTracking:!1,texts:{acceptAndDisplay:"Accept"},classes:{onSave:"cc-saved",onShow:"cc-active",onGroupToggle:"cc-active",onGroupSplitSelection:"cc-group-half"}};function o(){let e={},t=0,s=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],s++);let n=function(s){for(let i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t&&"[object Object]"===Object.prototype.toString.call(s[i])?e[i]=o(1,e[i],s[i]):e[i]=s[i])};for(;s<i;s++){n(arguments[s])}return e}function n(e,t=null){let s,i=[];for(s in e)if(e.hasOwnProperty(s)){let o=t?t+"["+s+"]":s,c=e[s];i.push(null!==c&&"object"==typeof c?n(c,o):encodeURIComponent(o)+"="+encodeURIComponent(c))}return i.join("&")}function c(){return Math.floor(+new Date/1e3)}function r(e){console.info("%cContao Cookiebar:","background: #fff09b; color: #222; padding: 3px","\n"+e)}class a{constructor(e,t){this.settings=e,this.storage=t}log(){const e=n({referrer:window.location.pathname,configId:this.settings.configId,pageId:this.settings.pageId,cookies:this.storage.get()?.cookies});fetch(`/cookiebar/log?${e}`,{method:"GET"})}}function d(e,t){let s=document.querySelectorAll('.cc-module[data-ccb-id="'+e+'"]');s&&s.forEach(function(e){e.parentNode.removeChild(e)}),t.modules["_"+e].forEach(function(e){e()}),delete t.modules["_"+e],t.updateUserInterface()}class l{constructor(){this.cache={}}verify(e,t,s){const i=`${e.id}${t}`,o=this.cache[s]??=[];return!!o.includes(i)||(o.push(i),!1)}}class h{constructor(e){this.settings=e,this.identifier=e.token+"_"+e.configId,null===localStorage.getItem(this.identifier)&&localStorage.setItem(this.identifier,JSON.stringify({configId:e.configId,pageId:e.pageId,version:-1,saved:-1,cookies:[]}))}get(){return JSON.parse(localStorage.getItem(this.identifier))}set(e){localStorage.setItem(this.identifier,JSON.stringify(e))}isset(e){const t=this.get().cookies;if(null===t)return!1;if("number"==typeof e)return t.includes(e);for(const{id:s,token:i}of Object.values(this.settings.cookies))if(i&&i.includes(e))return t.includes(s);return t.includes(e.toString())}}class u{#e="ccb_contao";#t="_dismissed";setDismissed(){sessionStorage.setItem(this.#e+this.#t,"true")}isDismissed(){return"true"===sessionStorage.getItem(this.#e+this.#t)}}class g{settings;#s=!1;#i;modules={};loadedResources=[];resourcesEvents=[];constructor(e){this.settings=o(!0,i,e),this.#i=document.querySelector(this.settings.selector),this.cache=new l,this.storage=new h(this.settings),this.session=new u;const t=this.storage.get();this.session.isDismissed()||this.settings.hideOnInit||parseInt(t.version)===parseInt(this.settings.version)&&parseInt(t.configId)===parseInt(this.settings.configId)&&!function(e,t){const s=parseInt(e),i=parseInt(t.settings.lifetime);return!isNaN(s)&&-1!==s&&0!==i&&s+i<c()}(t.saved,this)||this.settings.doNotTrack&&(window.doNotTrack||navigator.doNotTrack||navigator.msDoNotTrack)&&("1"==window.doNotTrack||"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack)||!function(e){return!(e.settings.currentPageId&&e.settings.excludedPageIds&&-1!==e.settings.excludedPageIds.indexOf(e.settings.currentPageId))}(this)||(this.#s=!0),this.inputs=[];this.#i.querySelectorAll('input[name="cookie[]"]').forEach(e=>{e.disabled||this.inputs.push(e)}),this.settings.disableTracking&&r("The execution of scripts is prevented. Please log out of the backend to test scripts, or disable the setting within the cookiebar config."),this.settings.consentLog&&(this.consentlogger=new a(this.settings,this.storage)),this.#o(),this.#n(),this.focusTrap=this.focusTrap.bind(this),this.#c(),this.settings.focusTrap&&this.#r(),this.settings.blocking&&this.#a(),function(e){const t=Object.entries(e.settings.cookies??{}).sort(([,e],[,t])=>t.priority-e.priority);e.settings.cookies=Array.from(t).reduce((e,[t,s])=>Object.assign(e,{[`_${t}`]:s}),{})}(this),this.#d(t.cookies),this.#l(),this.#h(),this.#u(),this.updateUserInterface(),window.dispatchEvent(function(e){return new CustomEvent("cookiebar_init",{detail:{visibility:e.show,cookiebar:e}})}(this))}get(){return console.warn("cookiebar.get() is deprecated. Use the class instance instead."),this}getStorage(){return this.storage.get()}issetCookie=function(e){return console.warn("cookiebar.issetCookie() is deprecated. Use cookiebar.cookieExists() instead."),this.storage.isset(e)};cookieExists(e){return this.storage.isset(e)}unblock(e,t,s){"iframe"===e.tagName.toLowerCase()?e.src=s:e.tagName.toLowerCase()&&(window.location.href=s),this.push(t),this.#g(t)}addModule(e,t,s){return function(e,t,s,i){if(function(e,t,s){s.modules.hasOwnProperty("_"+e)?s.modules["_"+e].push(t):s.modules["_"+e]=[t]}(e,t,i),i.storage.isset(e))return d(e,i),!1;if(s&&"object"==typeof s&&s.selector){let t=null;if(t="string"==typeof s.selector?document.querySelector(s.selector):s.selector,t){let n=document.createElement("div");if(n.setAttribute("data-ccb-id",e),n.classList.add("cc-module"),s.message&&(n.innerHTML="<p>"+s.message+"</p>"),"object"==typeof s.button&&!0===s.button.show){var o=document.createElement("button");o.innerHTML=s.button.text||i.settings.texts.acceptAndDisplay,o.type=s.button.type||"button",s.button.classes&&(o.className=s.button.classes),o.addEventListener("click",function(){i.push(e),d(e,i)}),n.append(o)}t.appendChild(n)}}}(e,t,s,this)}onResourceLoaded(e,t){!function(e,t,s){if(!s.settings.cookies.hasOwnProperty(e))return console.warn(`Cookie ID ${e} does not exists.`),!1;if(!s.settings.cookies[e].resources.length)return console.warn(`The cookie ID ${e} does not contain any resources.`),!1;const i=s.settings.cookies[e].resources[0].src;-1!==s.loadedResources.indexOf(i)?t():s.resourcesEvents.push({src:i,callback:t})}(e,t,this)}show(e){this.#s=!0,this.#l(),e&&this.updateUserInterface()}hide(){this.#s=!1,this.#l()}focusTrap(e){"Tab"!==e.key&&9!==e.keyCode||(this.focused||(this.focused=!0,this.firstFocus?.classList.remove("cc-hide-focus")),document.activeElement!==this.lastFocus||e.shiftKey||(e.preventDefault(),this.firstFocus?.focus()),document.activeElement===this.firstFocus&&e.shiftKey&&(e.preventDefault(),this.lastFocus?.focus()),document.activeElement!==this.toggleOpener||function(e){for(;e;){if("none"===window.getComputedStyle(e).display)return!1;e=e.parentElement}return!0}(this.lastFocus)||"false"!==this.toggleOpener.ariaExpanded||e.shiftKey||(e.preventDefault(),this.firstFocus?.focus()))}#c(){const e=document.createElement("button");e.type="button",e.textContent="âœ•",e.ariaLabel="Close",e.classList.add("cc-close"),this.#i.querySelector(".cc-inner").appendChild(e);const t=()=>{this.session.setDismissed(),this.hide()};e.addEventListener("click",t),document.addEventListener("keydown",e=>{"Escape"===e.key&&t()})}#f(e){const t=[],s=e.currentTarget;let i=0;s.hasAttribute("data-accept-all")?i=1:s.hasAttribute("data-deny-all")&&(i=2),this.#p(!1),this.inputs.forEach(e=>{2===i?e.checked=!1:(1===i||e.checked)&&(t.push(parseInt(e.value)),e.checked=!0)}),this.storage.set({configId:this.settings.configId,pageId:this.settings.pageId,version:this.settings.version,saved:c(),cookies:t}),this.#d(t,!0),this.#h(),this.#u(),this.settings.consentLog&&this.consentlogger.log(),t.forEach(e=>{this.settings.cookies.hasOwnProperty("_"+e)&&"iframe"===this.settings.cookies["_"+e].type&&this.#g(e),this.modules.hasOwnProperty("_"+e)&&d(e,this)}),this.#i.classList.add(this.settings.classes.onSave),window.dispatchEvent(new CustomEvent("cookiebar_save",{detail:{cookiebar:this}})),this.updateUserInterface(!0)}push(e){const t=this.storage.get();t.cookies.includes(e)||(t.cookies.push(parseInt(e)),this.storage.set(t),this.settings.cookies["_"+e].confirmed=!0,this.settings.consentLog&&this.consentlogger.log())}updateUserInterface(e=!1){if(!this.show&&!0!==e)return;const t=this.storage.get();let s=[];if(t.cookies&&t.cookies.length)s=t.cookies;else if(-1===t.version)for(const e in this.settings.cookies){const t=parseInt(e.replace("_",""));this.settings.cookies[e].checked&&s.push(t)}s.forEach(e=>{const t=this.#i.querySelector('[id="c'+e+'"]');t&&(t.checked=!0)});this.#i.querySelectorAll('input[name="group[]"]').forEach(e=>{if(e.disabled)return;e.checked=!1,e.classList.remove(this.settings.classes.onGroupSplitSelection);const t=e.parentElement.querySelectorAll('input[name="cookie[]"]'),s=[];t&&(t.forEach(function(e){e.disabled||s.push(!!e.checked)}),-1===s.indexOf(!1)?e.checked=!0:-1!==s.indexOf(!0)&&-1!==s.indexOf(!1)&&e.classList.add(this.settings.classes.onGroupSplitSelection))})}#d(e,t=!1){const s=[];for(const i in this.settings.cookies){if(!this.settings.cookies.hasOwnProperty(i))continue;const o=parseInt(i.replace("_","")),n=!!this.settings.cookies[i].confirmed,c=e.includes(o),r=n!==c&&!c;if(this.settings.cookies[i].confirmed=c,!0===t&&r){const e=this.settings.cookies[i].token;null!==e&&e.forEach(e=>{s.push(e)})}}if(!0===t&&s.length){const e=new XMLHttpRequest;e.open("POST","/cookiebar/delete",!0),e.send(n({tokens:s}))}}#h(){for(const e in this.settings.configs){if(!this.settings.configs.hasOwnProperty(e))continue;const t=this.settings.configs[e],s=Object.fromEntries(Object.entries(t.cookies).map(([e,t])=>[`_${e}`,t])),i=this.#m(s);null!==t.resources&&t.resources.forEach((e,s)=>{if(1===e.mode&&i||2===e.mode&&!i||3===e.mode){if(this.cache.verify(t,s,"config_resource"))return;this.#k(e)}}),null!==t.scripts&&t.scripts.forEach((e,s)=>{if(1===e.mode===i||2===e.mode==!i||3===e.mode){if(this.cache.verify(t,s,"config_script"))return;this.#b(e)}})}}#u(){for(const e in this.settings.cookies){if(!this.settings.cookies.hasOwnProperty(e))continue;const t=this.settings.cookies[e];null!==t.resources&&t.resources.forEach((e,s)=>{if(1===e.mode&&t.confirmed||2===e.mode&&!t.confirmed||3===e.mode){if(this.cache.verify(t,s,"resource"))return;this.#k(e)}}),null!==t.scripts&&t.scripts.forEach((e,s)=>{if(1===e.mode===t.confirmed||2===e.mode==!t.confirmed||3===e.mode){if(this.cache.verify(t,s,"script"))return;this.#b(e)}})}}#b(e){this.settings.disableTracking?r("Script execution was stopped."):(e.script=function(e){const t=document.createElement("script");return t.type="text/javascript",t.nonce=document.querySelector("script[nonce]")?.nonce??null,t.innerHTML=e,t}(e.script),function(e,t){switch(t){case 1:document.body.append(e);break;case 2:document.body.prepend(e);break;case 3:document.head.append(e)}}(e.script,e.position))}#k(e){if(this.settings.disableTracking)return void r("Adding a resource was stopped.");try{const t=document.querySelectorAll("script[src]"),s=function(e){const t=e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return t&&t[1]}(e.src);for(let e=t.length;e--;)if(-1!==t[e].src.indexOf(s)&&s!==window.location.host)return!1}catch(e){}const t=document.createElement("script");t.type="text/javascript",t.nonce=document.querySelector("script[nonce]")?.nonce??null,t.src=e.src,t.onload=()=>{this.loadedResources.push(e.src),this.#v()},null!==e.flags&&e.flags.length&&e.flags.forEach(e=>{"object"==typeof e?t.setAttribute(e[0],e[1]):t[e]=!0}),document.head.append(t)}#m(e){let t=!1;for(const s in e)if(this.settings.cookies.hasOwnProperty(s)&&this.settings.cookies[s].confirmed){t=!0;break}return t}#n(){document.querySelectorAll("a.ccb-trigger, strong.ccb-trigger").forEach(e=>{this.#y(e)}),new MutationObserver(e=>{for(const t of e)"childList"===t.type&&t.addedNodes.forEach(e=>{e instanceof HTMLElement&&e.matches("a.ccb-trigger, strong.ccb-trigger")&&this.#y(e)})}).observe(document,{attributes:!1,childList:!0,subtree:!0})}#y(e){e.addEventListener("click",t=>{t.preventDefault(),this.show(e.classList.contains("ccb-prefill"))})}#o(){this.#i.querySelectorAll("[data-save],[data-accept-all],[data-deny-all]").forEach(e=>{e.addEventListener("click",e=>this.#f(e))}),this.#i.querySelectorAll("[data-toggle-cookies]").forEach(e=>{e.addEventListener("click",e=>this.#E(e))}),this.#i.querySelectorAll("[data-toggle-group]").forEach(e=>{e.addEventListener("click",e=>this.#S(e))})}#v(){if(!this.resourcesEvents.length)return!1;this.resourcesEvents.forEach((e,t)=>{if(-1===this.loadedResources.indexOf(e.src))return!1;e.callback(),delete this.resourcesEvents[t]})}#g(e){document.querySelectorAll('iframe[data-ccb-id="'+e+'"]').forEach(e=>{e.src=e.src,e.removeAttribute("data-ccb-id")}),this.updateUserInterface()}#r(){const e=this.#i.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), input[type="checkbox"]:not([disabled])');this.toggleOpener=this.#i.querySelector("[data-ft-opener]"),this.firstFocus=e[0],this.lastFocus=e[e.length-1]}#p(e){this.settings.blocking&&this.#i?.parentElement.querySelectorAll(":scope >:not(script):not(.contao-cookiebar)")?.forEach(t=>{e?t.setAttribute("inert",""):t.removeAttribute("inert")}),this.settings.focusTrap&&(e?(document.addEventListener("keydown",this.focusTrap),this.#i.querySelector(".cc-inner").onanimationend=()=>{this.focused=!1,this.firstFocus?.classList.add("cc-hide-focus"),this.firstFocus?.focus({preventScroll:!0})}):document.removeEventListener("keydown",this.focusTrap))}#a(){new MutationObserver(e=>{for(const t of e)"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach(e=>{this.#s&&e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement&&!e.classList.contains(".contao-cookiebar")&&!e.hasAttribute("inert")&&e.setAttribute("inert","")})}).observe(this.#i,{childList:!0,subtree:!1})}#l(){this.#s?(this.#i.classList.remove(this.settings.classes.onSave),this.#i.classList.add(this.settings.classes.onShow),this.#p(!0)):(this.#i.classList.remove(this.settings.classes.onShow),this.#p(!1))}#E(e){const t=e.currentTarget,s=t.checked;t.parentElement.querySelectorAll('input[name="cookie[]"]').forEach(e=>{e.disabled||(e.checked=s)}),t.classList.remove(this.settings.classes.onGroupSplitSelection)}#S(e){const t=e.currentTarget,s=!t.classList.contains(this.settings.classes.onGroupToggle);t.setAttribute("aria-expanded",s?"true":"false");t.parentElement.querySelectorAll(":scope > .toggle-group").forEach(e=>{e.style.display=s?"block":"none"}),t.classList.toggle(this.settings.classes.onGroupToggle)}}}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};const{ContaoCookiebar:i}=s(675);window.ContaoCookiebar=i}();