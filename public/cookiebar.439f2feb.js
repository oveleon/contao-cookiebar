!function(){var e={513:function(e,t,s){"use strict";s.r(t),s.d(t,{ContaoCookiebar:function(){return u}});const o={selector:".contao-cookiebar",token:"ccb_contao_token",configId:null,pageId:null,hideOnInit:!1,blocking:!1,focusTrap:!0,version:null,lifetime:63072e3,consentLog:!1,cookies:null,configs:null,doNotTrack:!1,currentPageId:0,excludedPageIds:null,disableTracking:!1,texts:{acceptAndDisplay:"Accept"},classes:{onSave:"cc-saved",onShow:"cc-active",onGroupToggle:"cc-active",onGroupSplitSelection:"cc-group-half"}};function i(){let e={},t=0,s=0,o=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],s++);let n=function(s){for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t&&"[object Object]"===Object.prototype.toString.call(s[o])?e[o]=i(1,e[o],s[o]):e[o]=s[o])};for(;s<o;s++){n(arguments[s])}return e}function n(e,t=null){let s,o=[];for(s in e)if(e.hasOwnProperty(s)){let i=t?t+"["+s+"]":s,r=e[s];o.push(null!==r&&"object"==typeof r?n(r,i):encodeURIComponent(i)+"="+encodeURIComponent(r))}return o.join("&")}function r(){return Math.floor(+new Date/1e3)}function c(e){console.info("%cContao Cookiebar:","background: #fff09b; color: #222; padding: 3px","\n"+e)}class a{constructor(e,t){this.settings=e,this.storage=t}log(){const e=n({referrer:window.location.pathname,configId:this.settings.configId,pageId:this.settings.pageId,cookies:this.storage.get()?.cookies});fetch(`/cookiebar/log?${e}`,{method:"GET"})}}function l(e,t){let s=document.querySelectorAll('.cc-module[data-ccb-id="'+e+'"]');s&&s.forEach(function(e){e.parentNode.removeChild(e)}),t.modules["_"+e].forEach(function(e){e()}),delete t.modules["_"+e],t.updateUserInterface()}class d{constructor(){this.cache={}}verify(e,t,s){const o=`${e.id}${t}`,i=this.cache[s]??=[];return!!i.includes(o)||(i.push(o),!1)}}class h{constructor(e){this.settings=e,this.identifier=e.token+"_"+e.configId,this.localStorage=localStorage.getItem(this.identifier),null===this.localStorage&&(this.localStorage=JSON.stringify({configId:e.configId,pageId:e.pageId,version:-1,saved:-1,cookies:[]}))}get(){return JSON.parse(this.localStorage)}set(e){localStorage.setItem(this.identifier,JSON.stringify(e))}isset(e){const t=this.get().cookies;if(null===t)return!1;if("number"==typeof e)return t.includes(e);for(const{id:s,token:o}of Object.values(this.settings.cookies))if(o&&o.includes(e))return t.includes(s);return t.includes(e.toString())}}class u{settings;#e=!1;#t;modules={};#s=[];#o=[];constructor(e){this.settings=i(!0,o,e),this.#t=document.querySelector(this.settings.selector),this.cache=new d,this.storage=new h(this.settings);const t=this.storage.get();this.settings.hideOnInit||parseInt(t.version)===parseInt(this.settings.version)&&parseInt(t.configId)===parseInt(this.settings.configId)&&!function(e,t){let s=parseInt(e),o=parseInt(t.settings.lifetime);return!isNaN(s)&&-1!==s&&0!==o&&s+o<r()}(t.saved,this)||this.settings.doNotTrack&&(window.doNotTrack||navigator.doNotTrack||navigator.msDoNotTrack)&&("1"==window.doNotTrack||"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack)||!function(e){return!(e.settings.currentPageId&&e.settings.excludedPageIds&&-1!==e.settings.excludedPageIds.indexOf(e.settings.currentPageId))}(this)||(this.#e=!0),this.inputs=[],this.#t.querySelectorAll('input[name="cookie[]"]').forEach(e=>{e.disabled||this.inputs.push(e)}),this.settings.disableTracking&&c("The execution of scripts is prevented. Please log out of the backend to test scripts, or disable the setting within the cookiebar config."),this.settings.consentLog&&(this.consentlogger=new a(this.settings,this.storage)),this.#i(),this.#n(),this.focusTrap=this.focusTrap.bind(this),this.settings.focusTrap&&this.#r(),this.settings.blocking&&this.#c(),function(e){const t=Object.entries(e.settings.cookies??{}).sort(([,e],[,t])=>t.priority-e.priority);e.settings.cookies=Array.from(t).reduce((e,[t,s])=>Object.assign(e,{[`_${t}`]:s}),{})}(this),this.#a(t.cookies),this.#l(),this.#d(),this.#h(),this.updateUserInterface(),window.dispatchEvent(function(e){return new CustomEvent("cookiebar_init",{detail:{visibility:e.show,cookiebar:e}})}(this))}get(){return console.warn("cookiebar.get() is deprecated. Use the class instance instead."),this}getStorage(){return this.storage.get()}issetCookie=function(e){return console.warn("cookiebar.issetCookie() is deprecated. Use cookiebar.cookieExists() instead."),this.storage.isset(e)};cookieExists(e){return this.storage.isset(e)}unblock(e,t,s){"iframe"===e.tagName.toLowerCase()?e.src=s:e.tagName.toLowerCase()&&(window.location.href=s),this.push(t),this.#u(t)}addModule(e,t,s){return function(e,t,s,o){if(function(e,t,s){s.modules.hasOwnProperty("_"+e)?s.modules["_"+e].push(t):s.modules["_"+e]=[t]}(o,e,t),this.cookiebar.storage.isset(e))return l(o,e),!1;if(s&&"object"==typeof s&&s.selector){let t=null;if(t="string"==typeof s.selector?document.querySelector(s.selector):s.selector,t){let n=document.createElement("div");if(n.setAttribute("data-ccb-id",e),n.classList.add("cc-module"),s.message&&(n.innerHTML="<p>"+s.message+"</p>"),"object"==typeof s.button&&!0===s.button.show){var i=document.createElement("button");i.innerHTML=s.button.text||o.settings.texts.acceptAndDisplay,i.type=s.button.type||"button",s.button.classes&&(i.className=s.button.classes),i.addEventListener("click",function(){o.push(e),l(o,e)}),n.append(i)}t.appendChild(n)}}}(e,t,s,this)}onResourceLoaded(e,t){!function(e,t,s){if(!s.settings.cookies.hasOwnProperty(e))return console.warn(`Cookie ID ${e} does not exists.`),!1;if(!s.settings.cookies[e].resources.length)return console.warn(`The cookie ID ${e} does not contain any resources.`),!1;const o=s.settings.cookies[e].resources[0].src;-1!==s.loadedResources.indexOf(o)?t():s.resourcesEvents.push({src:o,callback:t})}(e,t,this)}show(e){this.#e=!0,this.#l(),e&&this.updateUserInterface()}hide(){this.#e=!1,this.#l()}focusTrap(e){"Tab"!==e.key&&9!==e.keyCode||(this.focused||(this.focused=!0,this.firstFocus?.classList.remove("cc-hide-focus")),document.activeElement!==this.lastFocus||e.shiftKey||(e.preventDefault(),this.firstFocus?.focus()),document.activeElement===this.firstFocus&&e.shiftKey&&(e.preventDefault(),this.lastFocus?.focus()),document.activeElement!==this.toggleOpener||function(e){for(;e;){if("none"===window.getComputedStyle(e).display)return!1;e=e.parentElement}return!0}(this.lastFocus)||"false"!==this.toggleOpener.ariaExpanded||e.shiftKey||(e.preventDefault(),this.firstFocus?.focus()))}#g(e){let t=[],s=e.currentTarget,o=0;s.hasAttribute("data-accept-all")?o=1:s.hasAttribute("data-deny-all")&&(o=2),this.#f(!1),this.inputs.forEach(e=>{2===o?e.checked=!1:(1===o||e.checked)&&(t.push(parseInt(e.value)),e.checked=!0)}),this.storage.set({configId:this.settings.configId,pageId:this.settings.pageId,version:this.settings.version,saved:r(),cookies:t}),this.#a(t,!0),this.#d(),this.#h(),this.settings.consentLog&&this.consentlogger.log(),t.length&&t.forEach(e=>{this.settings.cookies.hasOwnProperty("_"+e)&&"iframe"===this.settings.cookies["_"+e].type&&this.#u(e),this.modules.hasOwnProperty("_"+e)&&l(e,this)}),this.#t.classList.add(this.settings.classes.onSave),window.dispatchEvent(new CustomEvent("cookiebar_save",{detail:{cookiebar:this}})),this.updateUserInterface(!0)}push(e){const t=this.storage.get();t.cookies.includes(e)||(t.cookies.push(parseInt(e)),this.storage.set(t),this.settings.cookies["_"+e].confirmed=!0,this.settings.consentLog&&this.consentlogger.log())}updateUserInterface(e=!1){if(!this.show&&!0!==e)return;let t=this.storage.get(),s=[];if(t.cookies&&t.cookies.length)s=t.cookies;else if(-1===t.version)for(let e in this.settings.cookies){const t=parseInt(e.replace("_",""));this.settings.cookies[e].checked&&s.push(t)}s.length&&s.forEach(e=>{let t=this.#t.querySelector('[id="c'+e+'"]');t&&(t.checked=!0)});let o=this.#t.querySelectorAll('input[name="group[]"]');o&&o.forEach(e=>{if(e.disabled)return;e.checked=!1,e.classList.remove(this.settings.classes.onGroupSplitSelection);let t=e.parentElement.querySelectorAll('input[name="cookie[]"]'),s=[];t&&(t.forEach(function(e){e.disabled||s.push(!!e.checked)}),-1===s.indexOf(!1)?e.checked=!0:-1!==s.indexOf(!0)&&-1!==s.indexOf(!1)&&e.classList.add(this.settings.classes.onGroupSplitSelection))})}#a(e,t=!1){let s=[];for(let o in this.settings.cookies){const i=parseInt(o.replace("_",""));if(!this.settings.cookies.hasOwnProperty(o))continue;let n=!!this.settings.cookies[o].confirmed,r=e.includes(i),c=n!==r&&!r;if(this.settings.cookies[o].confirmed=r,!0===t&&c){let e=this.settings.cookies[o].token;null!==e&&e.forEach(e=>{s.push(e)})}}if(!0===t&&s.length){let e=new XMLHttpRequest;e.open("POST","/cookiebar/delete",!0),e.send(n({tokens:s}))}}#d(){for(let e in this.settings.configs){if(!this.settings.configs.hasOwnProperty(e))continue;let t=this.settings.configs[e];const s=Object.fromEntries(Object.entries(t.cookies).map(([e,t])=>[`_${e}`,t]));let o=this.#p(s);null!==t.resources&&t.resources.forEach((e,s)=>{if(1===e.mode&&o||2===e.mode&&!o||3===e.mode){if(this.cache.verify(t,s,"config_resource"))return;this.#m(e)}}),null!==t.scripts&&t.scripts.forEach((e,s)=>{if(1===e.mode===o||2===e.mode==!o||3===e.mode){if(this.cache.verify(t,s,"config_script"))return;this.#k(e)}})}}#h(){let e;for(e in this.settings.cookies){if(!this.settings.cookies.hasOwnProperty(e))continue;let t=this.settings.cookies[e];null!==t.resources&&t.resources.forEach((e,s)=>{if(1===e.mode&&t.confirmed||2===e.mode&&!t.confirmed||3===e.mode){if(this.cache.verify(t,s,"resource"))return;this.#m(e)}}),null!==t.scripts&&t.scripts.forEach((e,s)=>{if(1===e.mode===t.confirmed||2===e.mode==!t.confirmed||3===e.mode){if(this.cache.verify(t,s,"script"))return;this.#k(e)}})}}#k(e){this.settings.disableTracking?c("Script execution was stopped."):(e.script=function(e){let t=document.createElement("script");return t.type="text/javascript",t.nonce=document.querySelector("script[nonce]")?.nonce??null,t.innerHTML=e,t}(e.script),function(e,t){switch(t){case 1:document.body.append(e);break;case 2:document.body.prepend(e);break;case 3:document.head.append(e)}}(e.script,e.position))}#m(e){if(this.settings.disableTracking)return void c("Adding a resource was stopped.");try{let t=document.querySelectorAll("script[src]"),s=function(e){let t=e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return t&&t[1]}(e.src);for(let e=t.length;e--;)if(-1!==t[e].src.indexOf(s)&&s!==window.location.host)return!1}catch(e){}let t=document.createElement("script");t.type="text/javascript",t.nonce=document.querySelector("script[nonce]")?.nonce??null,t.src=e.src,t.onload=()=>{this.#s.push(e.src),this.#b()},null!==e.flags&&e.flags.length&&e.flags.forEach(e=>{"object"==typeof e?t.setAttribute(e[0],e[1]):t[e]=!0}),document.head.append(t)}#p(e){let t,s=!1;for(t in e){if(!this.settings.cookies.hasOwnProperty(t))continue;if(this.settings.cookies[t].confirmed){s=!0;break}}return s}#n(){document.querySelectorAll("a.ccb-trigger, strong.ccb-trigger").forEach(e=>{this.#v(e)}),new MutationObserver(e=>{for(const t of e)"childList"===t.type&&t.addedNodes.forEach(e=>{e.matches&&e.matches("a.ccb-trigger, strong.ccb-trigger")&&this.#v(e)})}).observe(document,{attributes:!1,childList:!0,subtree:!0})}#v(e){e.addEventListener("click",t=>{t.preventDefault(),this.show(e.classList.contains("ccb-prefill"))})}#i(){let e=this.#t.querySelectorAll("[data-toggle-cookies]"),t=this.#t.querySelectorAll("[data-toggle-group]"),s=this.#t.querySelectorAll("[data-save],[data-accept-all],[data-deny-all]");s.length&&s.forEach(e=>{e.addEventListener("click",e=>{this.#g(e)})}),e.length&&e.forEach(e=>{e.addEventListener("click",e=>{this.#y(e)})}),t.length&&t.forEach(e=>{e.addEventListener("click",e=>{this.#E(e)})})}#b(){if(!this.#o.length)return!1;this.#o.forEach((e,t)=>{if(-1===this.#s.indexOf(e.src))return!1;e.callback(),delete this.#o[t]})}#u(e){let t=document.querySelectorAll('iframe[data-ccb-id="'+e+'"]');t.length&&t.forEach(e=>{e.src=e.src,e.removeAttribute("data-ccb-id")}),this.updateUserInterface()}#r(){const e=this.#t.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), input[type="checkbox"]:not([disabled])');this.toggleOpener=this.#t.querySelector("[data-ft-opener]"),this.firstFocus=e[0],this.lastFocus=e[e.length-1]}#f(e){this.settings.blocking&&this.#t?.parentElement.querySelectorAll(":scope >:not(script):not(.contao-cookiebar)")?.forEach(t=>{e?t.setAttribute("inert",""):t.removeAttribute("inert")}),this.settings.focusTrap&&(e?(document.addEventListener("keydown",this.focusTrap),this.#t.querySelector(".cc-inner").onanimationend=()=>{this.focused=!1,this.firstFocus?.classList.add("cc-hide-focus"),this.firstFocus?.focus({preventScroll:!0})}):document.removeEventListener("keydown",this.focusTrap))}#c(){new MutationObserver(e=>{for(const t of e)"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach(e=>{!this.#e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains(".contao-cookiebar")||e.hasAttribute("inert")||e.setAttribute("inert","")})}).observe(this.#t,{childList:!0,subtree:!1})}#l(){this.#e?(this.#t.classList.remove(this.settings.classes.onSave),this.#t.classList.add(this.settings.classes.onShow),this.#f(!0)):(this.#t.classList.remove(this.settings.classes.onShow),this.#f(!1))}#y(e){const t=e.currentTarget;let s=t.checked,o=t.parentElement.querySelectorAll('input[name="cookie[]"]');o&&o.forEach(e=>{e.disabled||(e.checked=s)}),t.classList.remove(this.settings.classes.onGroupSplitSelection)}#E(e){const t=e.currentTarget;let s=!t.classList.contains(this.settings.classes.onGroupToggle);t.setAttribute("aria-expanded",s?"true":"false");let o=t.parentElement.querySelectorAll(":scope > .toggle-group");o&&o.forEach(e=>{e.style.display=s?"block":"none"}),t.classList.toggle(this.settings.classes.onGroupToggle)}}}},t={};function s(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,s),n.exports}s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};const{ContaoCookiebar:o}=s(513);window.ContaoCookiebar=o}();