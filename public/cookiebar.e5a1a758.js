!function(){var e={246:function(e,t,s){"use strict";function o(e){let t=localStorage.getItem(r(e));return null===t?(t={configId:e.settings.configId,pageId:e.settings.pageId,version:-1,saved:-1,cookies:[]},localStorage.setItem(r(e),JSON.stringify(t))):t=JSON.parse(t),t}function i(e,t){localStorage.setItem(r(t),JSON.stringify(e))}function n(e,t){let s,i=o(t);if(!i.cookies)return!1;if("number"==typeof e)return-1!==i.cookies.indexOf(e);for(s in t.settings.cookies)if(null!==t.settings.cookies[s].token&&-1!==t.settings.cookies[s].token.indexOf(e))return-1!==i.cookies.indexOf(t.settings.cookies[s].id);return-1!==i.cookies.indexOf(e.toString())}function r(e){return e.settings.token+"_"+e.settings.configId}function c(e,t,s){if(!e.show&&!0!==s)return;let i=o(e),n=[];if(i.cookies&&i.cookies.length)n=i.cookies;else if(-1===i.version)for(let t in e.settings.cookies){const s=parseInt(t.replace("_",""));e.settings.cookies[t].checked&&n.push(s)}n.length&&n.forEach(e=>{let s=t.querySelector('[id="c'+e+'"]');s&&(s.checked=!0)});let r=t.querySelectorAll('input[name="group[]"]');r&&r.forEach(function(t){if(t.disabled)return;t.checked=!1,t.classList.remove(e.settings.classes.onGroupSplitSelection);let s=t.parentElement.querySelectorAll('input[name="cookie[]"]'),o=[];s&&(s.forEach(function(e){e.disabled||o.push(!!e.checked)}),-1===o.indexOf(!1)?t.checked=!0:-1!==o.indexOf(!0)&&-1!==o.indexOf(!1)&&t.classList.add(e.settings.classes.onGroupSplitSelection))})}s.r(t),s.d(t,{ContaoCookiebar:function(){return m}});const a={selector:".contao-cookiebar",token:"ccb_contao_token",configId:null,pageId:null,hideOnInit:!1,blocking:!1,focusTrap:!0,version:null,lifetime:63072e3,consentLog:!1,cookies:null,configs:null,doNotTrack:!1,currentPageId:0,excludedPageIds:null,disableTracking:!1,texts:{acceptAndDisplay:"Accept"},classes:{onSave:"cc-saved",onShow:"cc-active",onGroupToggle:"cc-active",onGroupSplitSelection:"cc-group-half"}};function l(){let e={},t=0,s=0,o=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],s++);let i=function(s){for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t&&"[object Object]"===Object.prototype.toString.call(s[o])?e[o]=l(1,e[o],s[o]):e[o]=s[o])};for(;s<o;s++){i(arguments[s])}return e}function d(e,t){let s,o=[];for(s in e)if(e.hasOwnProperty(s)){let i=t?t+"["+s+"]":s,n=e[s];o.push(null!==n&&"object"==typeof n?d(n,i):encodeURIComponent(i)+"="+encodeURIComponent(n))}return o.join("&")}function u(){return Math.floor(+new Date/1e3)}function h(e){console.info("%cContao Cookiebar:","background: #fff09b; color: #222; padding: 3px","\n"+e)}function f(e,t){if(!e.settings.consentLog)return;let s=new XMLHttpRequest,o={referrer:window.location.pathname,configId:e.settings.configId,pageId:e.settings.pageId,cookies:t.cookies};s.open("GET","/cookiebar/log?"+d(o),!0),s.send()}function g(e,t,s){let o=document.querySelectorAll('.cc-module[data-ccb-id="'+s+'"]');o&&o.forEach(function(e){e.parentNode.removeChild(e)}),e.modules["_"+s].forEach(function(e){e()}),delete e.modules["_"+s],c(e,t)}function p(e,t,s){return s.cache[t]||(s.cache[t]=[]),-1!==s.cache[t].indexOf(e)||(s.cache[t].push(e),!1)}function k(e,t){return e.id+""+t}class m{"use strict";settings;cache={};visible=!1;#e;#t={};#s=[];#o=[];constructor(e){this.settings=l(!0,a,e),this.#e=document.querySelector(this.settings.selector);let t=o(this);this.settings.hideOnInit||parseInt(t.version)===parseInt(this.settings.version)&&parseInt(t.configId)===parseInt(this.settings.configId)&&!function(e,t){let s=parseInt(e),o=parseInt(t.settings.lifetime);return!isNaN(s)&&-1!==s&&0!==o&&s+o<u()}(t.saved,this)||this.settings.doNotTrack&&(window.doNotTrack||navigator.doNotTrack||navigator.msDoNotTrack)&&("1"==window.doNotTrack||"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack)||!function(e){return!(e.settings.currentPageId&&e.settings.excludedPageIds&&-1!==e.settings.excludedPageIds.indexOf(e.settings.currentPageId))}(this)||(this.visible=!0),this.inputs=[],this.#e.querySelectorAll('input[name="cookie[]"]').forEach(e=>{e.disabled||this.inputs.push(e)}),this.settings.disableTracking&&h("The execution of scripts is prevented. Please log out of the backend to test scripts, or disable the setting within the cookiebar config."),this.#i(),this.#n(),this.settings.focusTrap&&this.#r(),this.settings.blocking&&this.#c(),function(e){const t=Object.entries(e.settings.cookies??{}).sort(([,e],[,t])=>t.priority-e.priority);e.settings.cookies=Array.from(t).reduce((e,[t,s])=>Object.assign(e,{[`_${t}`]:s}),{})}(this),this.#a(t.cookies),this.#l(),this.#d(),this.#u(),c(this,this.#e),window.dispatchEvent(function(e){return new CustomEvent("cookiebar_init",{detail:{visibility:e.show,cookiebar:e}})}(this))}publicMethod(){return"hello world"}secondPublicMethod(){return"goodbye world"}get(){return console.warn("cookiebar.get() is deprecated. Use the class instance instead."),this}getStorage(){return o(this)}issetCookie=function(e){return console.warn("cookiebar.issetCookie() is deprecated. Use cookiebar.cookieExists() instead."),n(e,this)};cookieExists(e){return n(e,this)}unblock(e,t,s){"iframe"===e.tagName.toLowerCase()?e.src=s:e.tagName.toLowerCase()&&(window.location.href=s),this.push(t),this.#h(t)}addModule(e,t,s){return function(e,t,s,o,i){if(function(e,t,s){e.modules.hasOwnProperty("_"+t)?e.modules["_"+t].push(s):e.modules["_"+t]=[s]}(o,e,t),n(e,o))return g(o,i,e),!1;if(s&&"object"==typeof s&&s.selector){let t=null;if(t="string"==typeof s.selector?document.querySelector(s.selector):s.selector,t){let n=document.createElement("div");if(n.setAttribute("data-ccb-id",e),n.classList.add("cc-module"),s.message&&(n.innerHTML="<p>"+s.message+"</p>"),"object"==typeof s.button&&!0===s.button.show){var r=document.createElement("button");r.innerHTML=s.button.text||o.settings.texts.acceptAndDisplay,r.type=s.button.type||"button",s.button.classes&&(r.className=s.button.classes),r.addEventListener("click",function(){o.push(e),g(o,i,e)}),n.append(r)}t.appendChild(n)}}}(e,t,s,this)}onResourceLoaded(e,t){!function(e,t,s){if(!s.settings.cookies.hasOwnProperty(e))return h.warn(`Cookie ID ${e} does not exists.`),!1;if(!s.settings.cookies[e].resources.length)return h.warn(`The cookie ID ${e} does not contain any resources.`),!1;const o=s.settings.cookies[e].resources[0].src;-1!==s.loadedResources.indexOf(o)?t():s.resourcesEvents.push({src:o,callback:t})}(e,t,this)}show(e){this.visible=!0,this.#l(),e&&c(this,this.#e)}hide(){this.visible=!1,this.#l()}#f(e){let t=[],s=e.currentTarget,n=0;s.hasAttribute("data-accept-all")?n=1:s.hasAttribute("data-deny-all")&&(n=2),this.#g(!1),this.inputs.forEach(e=>{2===n?e.checked=!1:(1===n||e.checked)&&(t.push(parseInt(e.value)),e.checked=!0)}),i({configId:this.settings.configId,pageId:this.settings.pageId,version:this.settings.version,saved:u(),cookies:t},this),this.#a(t,!0),this.#d(),this.#u(),f(this,o(this)),t.length&&t.forEach(e=>{this.settings.cookies.hasOwnProperty("_"+e)&&"iframe"===this.settings.cookies["_"+e].type&&this.#h(e),this.#t.hasOwnProperty("_"+e)&&g(this,this.#e,e)}),this.#e.classList.add(this.settings.classes.onSave),window.dispatchEvent(new CustomEvent("cookiebar_save",{detail:{cookiebar:this}})),c(this,this.#e,!0)}push(e){let t=o(this);t.cookies.includes(e)||(t.cookies.push(parseInt(e)),i(t,this),this.settings.cookies["_"+e].confirmed=!0,f(this,t))}#a(e,t){let s=[];for(let o in this.settings.cookies){const i=parseInt(o.replace("_",""));if(!this.settings.cookies.hasOwnProperty(o))continue;let n=!!this.settings.cookies[o].confirmed,r=e.includes(i),c=n!==r&&!r;if(this.settings.cookies[o].confirmed=r,!0===t&&c){let e=this.settings.cookies[o].token;null!==e&&e.forEach(e=>{s.push(e)})}}if(!0===t&&s.length){let e=new XMLHttpRequest;e.open("POST","/cookiebar/delete",!0),e.send(d({tokens:s}))}}#d(){for(let e in this.settings.configs){if(!this.settings.configs.hasOwnProperty(e))continue;let t=this.settings.configs[e];const s=Object.fromEntries(Object.entries(t.cookies).map(([e,t])=>[`_${e}`,t]));let o=this.#p(s);null!==t.resources&&t.resources.forEach((e,s)=>{if(1===e.mode&&o||2===e.mode&&!o||3===e.mode){if(p(k(t,s),"config_resource",this))return;this.#k(e)}}),null!==t.scripts&&t.scripts.forEach((e,s)=>{if(1===e.mode===o||2===e.mode==!o||3===e.mode){if(p(k(t,s),"config_script",this))return;this.#m(e)}})}}#u(){let e;for(e in this.settings.cookies){if(!this.settings.cookies.hasOwnProperty(e))continue;let t=this.settings.cookies[e];null!==t.resources&&t.resources.forEach((e,s)=>{if(1===e.mode&&t.confirmed||2===e.mode&&!t.confirmed||3===e.mode){if(p(k(t,s),"resource",this))return;this.#k(e)}}),null!==t.scripts&&t.scripts.forEach((e,s)=>{if(1===e.mode===t.confirmed||2===e.mode==!t.confirmed||3===e.mode){if(p(k(t,s),"script",this))return;this.#m(e)}})}}#m(e){this.settings.disableTracking?h("Script execution was stopped."):(e.script=function(e){let t=document.createElement("script");return t.type="text/javascript",t.nonce=document.querySelector("script[nonce]")?.nonce??null,t.innerHTML=e,t}(e.script),function(e,t){switch(t){case 1:document.body.append(e);break;case 2:document.body.prepend(e);break;case 3:document.head.append(e)}}(e.script,e.position))}#k(e){if(this.settings.disableTracking)return void h("Adding a resource was stopped.");try{let t=document.querySelectorAll("script[src]"),s=function(e){let t=e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return t&&t[1]}(e.src);for(let e=t.length;e--;)if(-1!==t[e].src.indexOf(s)&&s!==window.location.host)return!1}catch(e){}let t=document.createElement("script");t.type="text/javascript",t.nonce=document.querySelector("script[nonce]")?.nonce??null,t.src=e.src,t.onload=()=>{this.#s.push(e.src),this.#b()},null!==e.flags&&e.flags.length&&e.flags.forEach(e=>{"object"==typeof e?t.setAttribute(e[0],e[1]):t[e]=!0}),document.head.append(t)}#p(e){let t,s=!1;for(t in e){if(!this.settings.cookies.hasOwnProperty(t))continue;if(this.settings.cookies[t].confirmed){s=!0;break}}return s}#n(){document.querySelectorAll("a.ccb-trigger, strong.ccb-trigger").forEach(e=>{this.#v(e)}),new MutationObserver(e=>{for(const t of e)"childList"===t.type&&t.addedNodes.forEach(e=>{e.matches&&e.matches("a.ccb-trigger, strong.ccb-trigger")&&this.#v(e)})}).observe(document,{attributes:!1,childList:!0,subtree:!0})}#v(e){e.addEventListener("click",t=>{t.preventDefault(),this.show(e.classList.contains("ccb-prefill"))})}#i(){let e=this.#e.querySelectorAll("[data-toggle-cookies]"),t=this.#e.querySelectorAll("[data-toggle-group]"),s=this.#e.querySelectorAll("[data-save],[data-accept-all],[data-deny-all]");s.length&&s.forEach(e=>{e.addEventListener("click",e=>{this.#f(e)})}),e.length&&e.forEach(e=>{e.addEventListener("click",e=>{this.#y(e)})}),t.length&&t.forEach(e=>{e.addEventListener("click",e=>{this.#E(e)})})}#b(){if(!this.#o.length)return!1;this.#o.forEach((e,t)=>{if(-1===this.#s.indexOf(e.src))return!1;e.callback(),delete this.#o[t]})}#h(e){let t=document.querySelectorAll('iframe[data-ccb-id="'+e+'"]');t.length&&t.forEach(e=>{e.src=e.src,e.removeAttribute("data-ccb-id")}),c(this,this.#e)}#r(){const e=this.#e.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), input[type="checkbox"]:not([disabled])');this.toggleOpener=this.#e.querySelector("[data-ft-opener]"),this.firstFocus=e[0],this.lastFocus=e[e.length-1]}#S(e){"Tab"!==e.key&&9!==e.keyCode||(this.focused||(this.focused=!0,this.firstFocus?.classList.remove("cc-hide-focus")),document.activeElement!==this.lastFocus||e.shiftKey||(e.preventDefault(),this.firstFocus?.focus()),document.activeElement===this.firstFocus&&e.shiftKey&&(e.preventDefault(),this.lastFocus?.focus()),document.activeElement!==this.toggleOpener||function(e){for(;e;){if("none"===window.getComputedStyle(e).display)return!1;e=e.parentElement}return!0}(this.lastFocus)||"false"!==this.toggleOpener.ariaExpanded||e.shiftKey||(e.preventDefault(),this.firstFocus?.focus()))}#g(e){this.settings.blocking&&this.#e?.parentElement.querySelectorAll(":scope >:not(script):not(.contao-cookiebar)")?.forEach(t=>{e?t.setAttribute("inert",""):t.removeAttribute("inert")}),this.settings.focusTrap&&(e?(document.addEventListener("keydown",this.#S),this.#e.querySelector(".cc-inner").onanimationend=()=>{this.focused=!1,this.firstFocus?.classList.add("cc-hide-focus"),this.firstFocus?.focus({preventScroll:!0})}):document.removeEventListener("keydown",this.#S))}#c(){new MutationObserver(e=>{for(const t of e)"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach(e=>{!this.visible||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains(".contao-cookiebar")||e.hasAttribute("inert")||e.setAttribute("inert","")})}).observe(this.#e,{childList:!0,subtree:!1})}#l(){this.visible?(this.#e.classList.remove(this.settings.classes.onSave),this.#e.classList.add(this.settings.classes.onShow),this.#g(!0)):(this.#e.classList.remove(this.settings.classes.onShow),this.#g(!1))}#y(e){const t=e.currentTarget;let s=t.checked,o=t.parentElement.querySelectorAll('input[name="cookie[]"]');o&&o.forEach(e=>{e.disabled||(e.checked=s)}),t.classList.remove(this.settings.classes.onGroupSplitSelection)}#E(e){const t=e.currentTarget;let s=!t.classList.contains(this.settings.classes.onGroupToggle);t.setAttribute("aria-expanded",s?"true":"false");let o=t.parentElement.querySelectorAll(":scope > .toggle-group");o&&o.forEach(e=>{e.style.display=s?"block":"none"}),t.classList.toggle(this.settings.classes.onGroupToggle)}}}},t={};function s(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,s),n.exports}s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};const{ContaoCookiebar:o}=s(246);window.ContaoCookiebar=o}();